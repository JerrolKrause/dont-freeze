<ng-container *ngIf="state">
  <!-- Loading -->
  <div *ngIf="state.loading"><i class="fa fa-spinner fa-spin"></i> Loading...</div>

  <!-- Error -->
  <div class="alert alert-danger icon" *ngIf="state.error">
    {{ state?.error?.message || 'An error occured' }}
    <div>
      <hr class="my-2 mx-0" />

      <mat-accordion>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              See error details
            </mat-panel-title>
          </mat-expansion-panel-header>
          <pre class="mb-0">{{ state.error | json }}</pre>
        </mat-expansion-panel>
      </mat-accordion>

    </div>
  </div>

  <!-- Content -->
  <ng-container *ngIf="!state?.loading && !state?.error">
    <ng-content></ng-content>
  </ng-container>

</ng-container>
